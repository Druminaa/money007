import React, { createContext, useContext, useEffect, useState } from 'react'
import { useSettings } from '../hooks/useSupabase'

// Translation dictionaries
const translations = {
  en: {
    // Navigation
    dashboard: 'Dashboard',
    transactions: 'Transactions',
    analytics: 'Analytics',
    budget: 'Budget Planner',
    goals: 'Goals',
    borrowLoan: 'Borrow & Lend',
    settings: 'Settings',
    
    // Common
    save: 'Save',
    cancel: 'Cancel',
    delete: 'Delete',
    edit: 'Edit',
    add: 'Add',
    update: 'Update',
    loading: 'Loading...',
    
    // Transactions
    addTransaction: 'Add Transaction',
    editTransaction: 'Edit Transaction',
    income: 'Income',
    expense: 'Expense',
    amount: 'Amount',
    category: 'Category',
    description: 'Description',
    date: 'Date',
    type: 'Type',
    
    // Categories
    food: 'Food',
    transport: 'Transport',
    utilities: 'Utilities',
    entertainment: 'Entertainment',
    healthcare: 'Healthcare',
    shopping: 'Shopping',
    other: 'Other',
    salary: 'Salary',
    freelance: 'Freelance',
    investment: 'Investment',
    business: 'Business',
    rental: 'Rental',
    bonus: 'Bonus',
    gift: 'Gift',
    
    // Dashboard
    totalIncome: 'Total Income',
    totalExpenses: 'Total Expenses',
    balance: 'Balance',
    recentTransactions: 'Recent Transactions',
    welcome: 'Welcome back',
    financialOverview: 'Here\'s your financial overview for',
    totalBalance: 'Total Balance',
    monthlyIncome: 'Monthly Income',
    monthlyExpenses: 'Monthly Expenses',
    totalTransactions: 'Total Transactions',
    activeGoals: 'Active Goals',
    goalsProgress: 'Goals Progress',
    topCategories: 'Top Categories This Month',
    monthlySavings: 'Monthly Savings',
    thisMonthTransactions: 'This Month\'s Transactions',
    financialHealth: 'Financial Health',
    upcomingBills: 'Upcoming Bills',
    smartInsights: 'Smart Insights',
    todaySummary: 'Today\'s Summary',
    
    // Date filters
    all: 'All',
    daily: 'Daily',
    weekly: 'Weekly',
    monthly: 'Monthly',
    yearly: 'Yearly',
    today: 'Today',
    yesterday: 'Yesterday',
    tomorrow: 'Tomorrow',
    
    // PDF Export
    moneyManager: 'MONEY MANAGER',
    financialTransactionReport: 'Financial Transaction Report',
    generatedOn: 'Generated on',
    financialOverviewPDF: 'FINANCIAL OVERVIEW',
    netBalance: 'NET BALANCE',
    topExpenseCategories: 'TOP EXPENSE CATEGORIES',
    transactionDetails: 'TRANSACTION DETAILS',
    generatedByApp: 'Generated by Money Manager App - Your Personal Finance Companion',
    reportContains: 'Report contains',
    page: 'Page',
    pdfGeneratedSuccess: 'Creative PDF report generated successfully! ðŸŽ‰'
  },
  hi: {
    // Navigation
    dashboard: 'à¤¡à¥ˆà¤¶à¤¬à¥‹à¤°à¥à¤¡',
    transactions: 'à¤²à¥‡à¤¨-à¤¦à¥‡à¤¨',
    analytics: 'à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤£',
    budget: 'à¤¬à¤œà¤Ÿ à¤¯à¥‹à¤œà¤¨à¤¾',
    goals: 'à¤²à¤•à¥à¤·à¥à¤¯',
    borrowLoan: 'à¤‰à¤§à¤¾à¤° à¤”à¤° à¤•à¤°à¥à¤œ',
    settings: 'à¤¸à¥‡à¤Ÿà¤¿à¤‚à¤—à¥à¤¸',
    
    // Common
    save: 'à¤¸à¥‡à¤µ à¤•à¤°à¥‡à¤‚',
    cancel: 'à¤°à¤¦à¥à¤¦ à¤•à¤°à¥‡à¤‚',
    delete: 'à¤¹à¤Ÿà¤¾à¤à¤‚',
    edit: 'à¤¸à¤‚à¤ªà¤¾à¤¦à¤¿à¤¤ à¤•à¤°à¥‡à¤‚',
    add: 'à¤œà¥‹à¤¡à¤¼à¥‡à¤‚',
    update: 'à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚',
    loading: 'à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...',
    
    // Transactions
    addTransaction: 'à¤²à¥‡à¤¨-à¤¦à¥‡à¤¨ à¤œà¥‹à¤¡à¤¼à¥‡à¤‚',
    editTransaction: 'à¤²à¥‡à¤¨-à¤¦à¥‡à¤¨ à¤¸à¤‚à¤ªà¤¾à¤¦à¤¿à¤¤ à¤•à¤°à¥‡à¤‚',
    income: 'à¤†à¤¯',
    expense: 'à¤µà¥à¤¯à¤¯',
    amount: 'à¤°à¤¾à¤¶à¤¿',
    category: 'à¤¶à¥à¤°à¥‡à¤£à¥€',
    description: 'à¤µà¤¿à¤µà¤°à¤£',
    date: 'à¤¤à¤¾à¤°à¥€à¤–',
    type: 'à¤ªà¥à¤°à¤•à¤¾à¤°',
    
    // Categories
    food: 'à¤­à¥‹à¤œà¤¨',
    transport: 'à¤ªà¤°à¤¿à¤µà¤¹à¤¨',
    utilities: 'à¤‰à¤ªà¤¯à¥‹à¤—à¤¿à¤¤à¤¾à¤à¤‚',
    entertainment: 'à¤®à¤¨à¥‹à¤°à¤‚à¤œà¤¨',
    healthcare: 'à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯ à¤¸à¥‡à¤µà¤¾',
    shopping: 'à¤–à¤°à¥€à¤¦à¤¾à¤°à¥€',
    other: 'à¤…à¤¨à¥à¤¯',
    salary: 'à¤µà¥‡à¤¤à¤¨',
    freelance: 'à¤«à¥à¤°à¥€à¤²à¤¾à¤‚à¤¸',
    investment: 'à¤¨à¤¿à¤µà¥‡à¤¶',
    business: 'à¤µà¥à¤¯à¤¾à¤ªà¤¾à¤°',
    rental: 'à¤•à¤¿à¤°à¤¾à¤¯à¤¾',
    bonus: 'à¤¬à¥‹à¤¨à¤¸',
    gift: 'à¤‰à¤ªà¤¹à¤¾à¤°',
    
    // Dashboard
    totalIncome: 'à¤•à¥à¤² à¤†à¤¯',
    totalExpenses: 'à¤•à¥à¤² à¤µà¥à¤¯à¤¯',
    balance: 'à¤¶à¥‡à¤· à¤°à¤¾à¤¶à¤¿',
    recentTransactions: 'à¤¹à¤¾à¤² à¤•à¥‡ à¤²à¥‡à¤¨-à¤¦à¥‡à¤¨',
    welcome: 'à¤µà¤¾à¤ªà¤¸ à¤†à¤ªà¤•à¤¾ à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆ',
    financialOverview: 'à¤¯à¤¹à¤¾à¤ à¤†à¤ªà¤•à¤¾ à¤µà¤¿à¤¤à¥à¤¤à¥€à¤¯ à¤…à¤µà¤²à¥‹à¤•à¤¨ à¤¹à¥ˆ',
    totalBalance: 'à¤•à¥à¤² à¤¶à¥‡à¤· à¤°à¤¾à¤¶à¤¿',
    monthlyIncome: 'à¤®à¤¾à¤¸à¤¿à¤• à¤†à¤¯',
    monthlyExpenses: 'à¤®à¤¾à¤¸à¤¿à¤• à¤µà¥à¤¯à¤¯',
    totalTransactions: 'à¤•à¥à¤² à¤²à¥‡à¤¨-à¤¦à¥‡à¤¨',
    activeGoals: 'à¤¸à¤•à¥à¤°à¤¿à¤¯ à¤²à¤•à¥à¤·à¥à¤¯',
    goalsProgress: 'à¤²à¤•à¥à¤·à¥à¤¯ à¤ªà¥à¤°à¤—à¤¤à¤¿',
    topCategories: 'à¤‡à¤¸ à¤®à¤¹à¥€à¤¨à¥‡ à¤•à¥€ à¤¶à¥€à¤°à¥à¤· à¤¶à¥à¤°à¥‡à¤£à¤¿à¤¯à¤¾à¤',
    monthlySavings: 'à¤®à¤¾à¤¸à¤¿à¤• à¤¬à¤šà¤¤',
    thisMonthTransactions: 'à¤‡à¤¸ à¤®à¤¹à¥€à¤¨à¥‡ à¤•à¥‡ à¤²à¥‡à¤¨-à¤¦à¥‡à¤¨',
    financialHealth: 'à¤µà¤¿à¤¤à¥à¤¤à¥€à¤¯ à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯',
    upcomingBills: 'à¤†à¤—à¤¾à¤®à¥€ à¤¬à¤¿à¤²',
    smartInsights: 'à¤¸à¥à¤®à¤¾à¤°à¥à¤Ÿ à¤…à¤‚à¤¤à¤°à¥à¤¦à¥ƒà¤·à¥à¤Ÿà¤¿',
    todaySummary: 'à¤†à¤œ à¤•à¤¾ à¤¸à¤¾à¤°à¤¾à¤‚à¤¶',
    
    // Date filters
    all: 'à¤¸à¤­à¥€',
    daily: 'à¤¦à¥ˆà¤¨à¤¿à¤•',
    weekly: 'à¤¸à¤¾à¤ªà¥à¤¤à¤¾à¤¹à¤¿à¤•',
    monthly: 'à¤®à¤¾à¤¸à¤¿à¤•',
    yearly: 'à¤µà¤¾à¤°à¥à¤·à¤¿à¤•',
    today: 'à¤†à¤œ',
    yesterday: 'à¤•à¤²',
    tomorrow: 'à¤•à¤²',
    
    // PDF Export
    moneyManager: 'à¤®à¤¨à¥€ à¤®à¥ˆà¤¨à¥‡à¤œà¤°',
    financialTransactionReport: 'à¤µà¤¿à¤¤à¥à¤¤à¥€à¤¯ à¤²à¥‡à¤¨-à¤¦à¥‡à¤¨ à¤°à¤¿à¤ªà¥‹à¤°à¥à¤Ÿ',
    generatedOn: 'à¤ªà¤° à¤œà¥‡à¤¨à¤°à¥‡à¤Ÿ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾',
    financialOverviewPDF: 'à¤µà¤¿à¤¤à¥à¤¤à¥€à¤¯ à¤…à¤µà¤²à¥‹à¤•à¤¨',
    netBalance: 'à¤¨à¥‡à¤Ÿ à¤¬à¥ˆà¤²à¥‡à¤‚à¤¸',
    topExpenseCategories: 'à¤¶à¥€à¤°à¥à¤· à¤µà¥à¤¯à¤¯ à¤¶à¥à¤°à¥‡à¤£à¤¿à¤¯à¤¾à¤‚',
    transactionDetails: 'à¤²à¥‡à¤¨-à¤¦à¥‡à¤¨ à¤µà¤¿à¤µà¤°à¤£',
    generatedByApp: 'à¤®à¤¨à¥€ à¤®à¥ˆà¤¨à¥‡à¤œà¤° à¤à¤ª à¤¦à¥à¤µà¤¾à¤°à¤¾ à¤œà¥‡à¤¨à¤°à¥‡à¤Ÿ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ - à¤†à¤ªà¤•à¤¾ à¤µà¥à¤¯à¤•à¥à¤¤à¤¿à¤—à¤¤ à¤µà¤¿à¤¤à¥à¤¤ à¤¸à¤¾à¤¥à¥€',
    reportContains: 'à¤°à¤¿à¤ªà¥‹à¤°à¥à¤Ÿ à¤®à¥‡à¤‚ à¤¶à¤¾à¤®à¤¿à¤² à¤¹à¥ˆ',
    page: 'à¤ªà¥‡à¤œ',
    pdfGeneratedSuccess: 'à¤°à¤šà¤¨à¤¾à¤¤à¥à¤®à¤• à¤ªà¥€à¤¡à¥€à¤à¤« à¤°à¤¿à¤ªà¥‹à¤°à¥à¤Ÿ à¤¸à¤«à¤²à¤¤à¤¾à¤ªà¥‚à¤°à¥à¤µà¤• à¤œà¥‡à¤¨à¤°à¥‡à¤Ÿ à¤•à¥€ à¤—à¤ˆ! ðŸŽ‰'
  },
  gu: {
    // Navigation
    dashboard: 'àª¡à«‡àª¶àª¬à«‹àª°à«àª¡',
    transactions: 'àª²à«‡àª£-àª¦à«‡àª£',
    analytics: 'àªµàª¿àª¶à«àª²à«‡àª·àª£',
    budget: 'àª¬àªœà«‡àªŸ àª¯à«‹àªœàª¨àª¾',
    goals: 'àª²àª•à«àª·à«àª¯à«‹',
    borrowLoan: 'àª‰àª§àª¾àª° àª…àª¨à«‡ àª•àª°à«àªœ',
    settings: 'àª¸à«‡àªŸàª¿àª‚àª—à«àª¸',
    
    // Common
    save: 'àª¸à«‡àªµ àª•àª°à«‹',
    cancel: 'àª°àª¦à«àª¦ àª•àª°à«‹',
    delete: 'àª¡àª¿àª²à«€àªŸ àª•àª°à«‹',
    edit: 'àª¸àª‚àªªàª¾àª¦àª¿àª¤ àª•àª°à«‹',
    add: 'àªœà«‹àª¡à«‹',
    update: 'àª…àªªàª¡à«‡àªŸ àª•àª°à«‹',
    loading: 'àª²à«‹àª¡ àª¥àªˆ àª°àª¹à«àª¯à«àª‚ àª›à«‡...',
    
    // Transactions
    addTransaction: 'àª²à«‡àª£-àª¦à«‡àª£ àªœà«‹àª¡à«‹',
    editTransaction: 'àª²à«‡àª£-àª¦à«‡àª£ àª¸àª‚àªªàª¾àª¦àª¿àª¤ àª•àª°à«‹',
    income: 'àª†àªµàª•',
    expense: 'àª–àª°à«àªš',
    amount: 'àª°àª•àª®',
    category: 'àªµàª°à«àª—',
    description: 'àªµàª°à«àª£àª¨',
    date: 'àª¤àª¾àª°à«€àª–',
    type: 'àªªà«àª°àª•àª¾àª°',
    
    // Categories
    food: 'àª–àª¾àª£à«àª‚',
    transport: 'àªªàª°àª¿àªµàª¹àª¨',
    utilities: 'àª‰àªªàª¯à«‹àª—àª¿àª¤àª¾àª“',
    entertainment: 'àª®àª¨à«‹àª°àª‚àªœàª¨',
    healthcare: 'àª†àª°à«‹àª—à«àª¯ àª¸à«‡àªµàª¾',
    shopping: 'àª–àª°à«€àª¦àª¾àª°à«€',
    other: 'àª…àª¨à«àª¯',
    salary: 'àªªàª—àª¾àª°',
    freelance: 'àª«à«àª°à«€àª²àª¾àª¨à«àª¸',
    investment: 'àª—à«àª‚àª¤àªµàª£à«‚àª•',
    business: 'àªµà«àª¯àªµàª¸àª¾àª¯',
    rental: 'àª­àª¾àª¡à«àª‚',
    bonus: 'àª¬à«‹àª¨àª¸',
    gift: 'àª‰àªªàª¹àª¾àª°',
    
    // Dashboard
    totalIncome: 'àª•à«àª² àª†àªµàª•',
    totalExpenses: 'àª•à«àª² àª–àª°à«àªš',
    balance: 'àª¬àª¾àª•à«€ àª°àª•àª®',
    recentTransactions: 'àª¹àª¾àª²àª¨àª¾ àª²à«‡àª£-àª¦à«‡àª£',
    welcome: 'àªµàª¾àªªàª¸ àª†àªµàª•àª¾àª°',
    financialOverview: 'àª…àª¹à«€àª‚ àª¤àª®àª¾àª°à«àª‚ àª«àª¾àª‡àª¨àª¾àª¨à«àª¸àª¿àª¯àª² àª“àªµàª°àªµà«àª¯à« àª›à«‡',
    totalBalance: 'àª•à«àª² àª¬àª¾àª•à«€ àª°àª•àª®',
    monthlyIncome: 'àª®àª¾àª¸àª¿àª• àª†àªµàª•',
    monthlyExpenses: 'àª®àª¾àª¸àª¿àª• àª–àª°à«àªš',
    totalTransactions: 'àª•à«àª² àª²à«‡àª£-àª¦à«‡àª£',
    activeGoals: 'àª¸àª•à«àª°àª¿àª¯ àª²àª•à«àª·à«àª¯à«‹',
    goalsProgress: 'àª²àª•à«àª·à«àª¯à«‹àª¨à«€ àªªà«àª°àª—àª¤àª¿',
    topCategories: 'àª† àª®àª¹àª¿àª¨àª¾àª¨à«€ àª¶à«€àª°à«àª· àªµàª°à«àª—à«‹',
    monthlySavings: 'àª®àª¾àª¸àª¿àª• àª¬àªšàª¤',
    thisMonthTransactions: 'àª† àª®àª¹àª¿àª¨àª¾àª¨àª¾ àª²à«‡àª£-àª¦à«‡àª£',
    financialHealth: 'àª«àª¾àª‡àª¨àª¾àª¨à«àª¸àª¿àª¯àª² àª¹à«‡àª²à«àª¥',
    upcomingBills: 'àª†àªµàª¤àª¾ àª¬àª¿àª²',
    smartInsights: 'àª¸à«àª®àª¾àª°à«àªŸ àª‡àª¨à«àª¸àª¾àª‡àªŸà«àª¸',
    todaySummary: 'àª†àªœà«‡àª¨à«‹ àª¸àª¾àª°àª¾àª‚àª¶',
    
    // Date filters
    all: 'àª¬àª§à«àª‚',
    daily: 'àª¦à«ˆàª¨àª¿àª•',
    weekly: 'àª¸àª¾àªªà«àª¤àª¾àª¹àª¿àª•',
    monthly: 'àª®àª¾àª¸àª¿àª•',
    yearly: 'àªµàª¾àª°à«àª·àª¿àª•',
    today: 'àª†àªœà«‡',
    yesterday: 'àª—àª‡àª•àª¾àª²à«‡',
    tomorrow: 'àª†àªµàª¤à«€ àª•àª¾àª²à«‡',
    
    // PDF Export
    moneyManager: 'àª®àª¨à«€ àª®à«‡àª¨à«‡àªœàª°',
    financialTransactionReport: 'àª«àª¾àª‡àª¨àª¾àª¨à«àª¸àª¿àª¯àª² àªŸà«àª°àª¾àª¨à«àªà«‡àª•à«àª¶àª¨ àª°àª¿àªªà«‹àª°à«àªŸ',
    generatedOn: 'àªªàª° àªœàª¨àª°à«‡àªŸ àª•àª°à«àª¯à«àª‚',
    financialOverviewPDF: 'àª«àª¾àª‡àª¨àª¾àª¨à«àª¸àª¿àª¯àª² àª“àªµàª°àªµà«àª¯à«',
    netBalance: 'àª¨à«‡àªŸ àª¬à«‡àª²à«‡àª¨à«àª¸',
    topExpenseCategories: 'àªŸà«‹àªšàª¨à«€ àª–àª°à«àªš àªµàª°à«àª—à«‹',
    transactionDetails: 'àª²à«‡àª£-àª¦à«‡àª£ àªµàª¿àª—àª¤à«‹',
    generatedByApp: 'àª®àª¨à«€ àª®à«‡àª¨à«‡àªœàª° àªàªª àª¦à«àªµàª¾àª°àª¾ àªœàª¨àª°à«‡àªŸ àª•àª°à«àª¯à«àª‚ - àª¤àª®àª¾àª°à«‹ àªµà«àª¯àª•à«àª¤àª¿àª—àª¤ àª«àª¾àª‡àª¨àª¾àª¨à«àª¸ àª¸àª¾àª¥à«€',
    reportContains: 'àª°àª¿àªªà«‹àª°à«àªŸàª®àª¾àª‚ àª¸àª®àª¾àªµà«‡àª¶ àª¥àª¾àª¯ àª›à«‡',
    page: 'àªªà«‡àªœ',
    pdfGeneratedSuccess: 'àª¸àª°à«àªœàª¨àª¾àª¤à«àª®àª• àªªà«€àª¡à«€àªàª« àª°àª¿àªªà«‹àª°à«àªŸ àª¸àª«àª³àª¤àª¾àªªà«‚àª°à«àªµàª• àªœàª¨àª°à«‡àªŸ àª¥àªˆ! ðŸŽ‰'
  },
  mr: {
    // Navigation
    dashboard: 'à¤¡à¥…à¤¶à¤¬à¥‹à¤°à¥à¤¡',
    transactions: 'à¤µà¥à¤¯à¤µà¤¹à¤¾à¤°',
    analytics: 'à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤£',
    budget: 'à¤…à¤‚à¤¦à¤¾à¤œà¤ªà¤¤à¥à¤°à¤• à¤¯à¥‹à¤œà¤¨à¤¾',
    goals: 'à¤‰à¤¦à¥à¤¦à¤¿à¤·à¥à¤Ÿà¥‡',
    borrowLoan: 'à¤‰à¤§à¤¾à¤° à¤†à¤£à¤¿ à¤•à¤°à¥à¤œ',
    settings: 'à¤¸à¥‡à¤Ÿà¤¿à¤‚à¤—à¥à¤œ',
    
    // Common
    save: 'à¤œà¤¤à¤¨ à¤•à¤°à¤¾',
    cancel: 'à¤°à¤¦à¥à¤¦ à¤•à¤°à¤¾',
    delete: 'à¤¹à¤Ÿà¤µà¤¾',
    edit: 'à¤¸à¤‚à¤ªà¤¾à¤¦à¤¿à¤¤ à¤•à¤°à¤¾',
    add: 'à¤œà¥‹à¤¡à¤¾',
    update: 'à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤•à¤°à¤¾',
    loading: 'à¤²à¥‹à¤¡ à¤¹à¥‹à¤¤ à¤†à¤¹à¥‡...',
    
    // Transactions
    addTransaction: 'à¤µà¥à¤¯à¤µà¤¹à¤¾à¤° à¤œà¥‹à¤¡à¤¾',
    editTransaction: 'à¤µà¥à¤¯à¤µà¤¹à¤¾à¤° à¤¸à¤‚à¤ªà¤¾à¤¦à¤¿à¤¤ à¤•à¤°à¤¾',
    income: 'à¤‰à¤¤à¥à¤ªà¤¨à¥à¤¨',
    expense: 'à¤–à¤°à¥à¤š',
    amount: 'à¤°à¤•à¥à¤•à¤®',
    category: 'à¤µà¤°à¥à¤—',
    description: 'à¤µà¤°à¥à¤£à¤¨',
    date: 'à¤¤à¤¾à¤°à¥€à¤–',
    type: 'à¤ªà¥à¤°à¤•à¤¾à¤°',
    
    // Categories
    food: 'à¤…à¤¨à¥à¤¨',
    transport: 'à¤µà¤¾à¤¹à¤¤à¥‚à¤•',
    utilities: 'à¤¸à¥à¤µà¤¿à¤§à¤¾',
    entertainment: 'à¤®à¤¨à¥‹à¤°à¤‚à¤œà¤¨',
    healthcare: 'à¤†à¤°à¥‹à¤—à¥à¤¯ à¤¸à¥‡à¤µà¤¾',
    shopping: 'à¤–à¤°à¥‡à¤¦à¥€',
    other: 'à¤‡à¤¤à¤°',
    salary: 'à¤ªà¤—à¤¾à¤°',
    freelance: 'à¤®à¥à¤•à¥à¤¤ à¤µà¥à¤¯à¤µà¤¸à¤¾à¤¯',
    investment: 'à¤—à¥à¤‚à¤¤à¤µà¤£à¥‚à¤•',
    business: 'à¤µà¥à¤¯à¤µà¤¸à¤¾à¤¯',
    rental: 'à¤­à¤¾à¤¡à¥‡',
    bonus: 'à¤¬à¥‹à¤¨à¤¸',
    gift: 'à¤­à¥‡à¤Ÿ',
    
    // Dashboard
    totalIncome: 'à¤à¤•à¥‚à¤£ à¤‰à¤¤à¥à¤ªà¤¨à¥à¤¨',
    totalExpenses: 'à¤à¤•à¥‚à¤£ à¤–à¤°à¥à¤š',
    balance: 'à¤¶à¤¿à¤²à¥à¤²à¤•',
    recentTransactions: 'à¤…à¤²à¥€à¤•à¤¡à¥€à¤² à¤µà¥à¤¯à¤µà¤¹à¤¾à¤°',
    welcome: 'à¤ªà¤°à¤¤ à¤†à¤²à¤¾ à¤†à¤¹à¤¾à¤¤',
    financialOverview: 'à¤¯à¥‡à¤¥à¥‡ à¤¤à¥à¤®à¤šà¤¾ à¤†à¤°à¥à¤¥à¤¿à¤• à¤†à¤¢à¤¾à¤µà¤¾ à¤†à¤¹à¥‡',
    totalBalance: 'à¤à¤•à¥‚à¤£ à¤¶à¤¿à¤²à¥à¤²à¤•',
    monthlyIncome: 'à¤®à¤¾à¤¸à¤¿à¤• à¤‰à¤¤à¥à¤ªà¤¨à¥à¤¨',
    monthlyExpenses: 'à¤®à¤¾à¤¸à¤¿à¤• à¤–à¤°à¥à¤š',
    totalTransactions: 'à¤à¤•à¥‚à¤£ à¤µà¥à¤¯à¤µà¤¹à¤¾à¤°',
    activeGoals: 'à¤¸à¤•à¥à¤°à¤¿à¤¯ à¤‰à¤¦à¥à¤¦à¤¿à¤·à¥à¤Ÿà¥‡',
    goalsProgress: 'à¤‰à¤¦à¥à¤¦à¤¿à¤·à¥à¤Ÿà¤¾à¤‚à¤šà¥€ à¤ªà¥à¤°à¤—à¤¤à¥€',
    topCategories: 'à¤¯à¤¾ à¤®à¤¹à¤¿à¤¨à¥à¤¯à¤¾à¤¤à¥€à¤² à¤¶à¥€à¤°à¥à¤· à¤µà¤°à¥à¤—',
    monthlySavings: 'à¤®à¤¾à¤¸à¤¿à¤• à¤¬à¤šà¤¤',
    thisMonthTransactions: 'à¤¯à¤¾ à¤®à¤¹à¤¿à¤¨à¥à¤¯à¤¾à¤šà¥‡ à¤µà¥à¤¯à¤µà¤¹à¤¾à¤°',
    financialHealth: 'à¤†à¤°à¥à¤¥à¤¿à¤• à¤†à¤°à¥‹à¤—à¥à¤¯',
    upcomingBills: 'à¤¯à¥‡à¤£à¤¾à¤°à¥€ à¤¬à¤¿à¤²à¥‡',
    smartInsights: 'à¤¸à¥à¤®à¤¾à¤°à¥à¤Ÿ à¤…à¤‚à¤¤à¤°à¥à¤¦à¥ƒà¤·à¥à¤Ÿà¥€',
    todaySummary: 'à¤†à¤œà¤šà¤¾ à¤¸à¤¾à¤°à¤¾à¤‚à¤¶',
    
    // Date filters
    all: 'à¤¸à¤°à¥à¤µ',
    daily: 'à¤¦à¥ˆà¤¨à¤¿à¤•',
    weekly: 'à¤¸à¤¾à¤ªà¥à¤¤à¤¾à¤¹à¤¿à¤•',
    monthly: 'à¤®à¤¾à¤¸à¤¿à¤•',
    yearly: 'à¤µà¤¾à¤°à¥à¤·à¤¿à¤•',
    today: 'à¤†à¤œ',
    yesterday: 'à¤•à¤¾à¤²',
    tomorrow: 'à¤‰à¤¦à¥à¤¯à¤¾',
    
    // PDF Export
    moneyManager: 'à¤®à¤¨à¥€ à¤®à¥…à¤¨à¥‡à¤œà¤°',
    financialTransactionReport: 'à¤†à¤°à¥à¤¥à¤¿à¤• à¤µà¥à¤¯à¤µà¤¹à¤¾à¤° à¤…à¤¹à¤µà¤¾à¤²',
    generatedOn: 'à¤µà¤° à¤¤à¤¯à¤¾à¤° à¤•à¥‡à¤²à¥‡',
    financialOverviewPDF: 'à¤†à¤°à¥à¤¥à¤¿à¤• à¤†à¤¢à¤¾à¤µà¤¾',
    netBalance: 'à¤¨à¤¿à¤µà¥à¤µà¤³ à¤¶à¤¿à¤²à¥à¤²à¤•',
    topExpenseCategories: 'à¤¶à¥€à¤°à¥à¤· à¤–à¤°à¥à¤š à¤µà¤°à¥à¤—',
    transactionDetails: 'à¤µà¥à¤¯à¤µà¤¹à¤¾à¤° à¤¤à¤ªà¤¶à¥€à¤²',
    generatedByApp: 'à¤®à¤¨à¥€ à¤®à¥…à¤¨à¥‡à¤œà¤° à¤…à¥…à¤ªà¤¦à¥à¤µà¤¾à¤°à¥‡ à¤¤à¤¯à¤¾à¤° à¤•à¥‡à¤²à¥‡ - à¤¤à¥à¤®à¤šà¤¾ à¤µà¥ˆà¤¯à¤•à¥à¤¤à¤¿à¤• à¤µà¤¿à¤¤à¥à¤¤ à¤¸à¤¾à¤¥à¥€',
    reportContains: 'à¤…à¤¹à¤µà¤¾à¤²à¤¾à¤¤ à¤¸à¤®à¤¾à¤µà¤¿à¤·à¥à¤Ÿ à¤†à¤¹à¥‡',
    page: 'à¤ªà¤¾à¤¨',
    pdfGeneratedSuccess: 'à¤¸à¤°à¥à¤œà¤¨à¤¶à¥€à¤² à¤ªà¥€à¤¡à¥€à¤à¤« à¤…à¤¹à¤µà¤¾à¤² à¤¯à¤¶à¤¸à¥à¤µà¥€à¤°à¤¿à¤¤à¥à¤¯à¤¾ à¤¤à¤¯à¤¾à¤° à¤à¤¾à¤²à¤¾! ðŸŽ‰'
  }
}

interface PreferencesContextType {
  currency: string
  language: string
  dateFormat: string
  formatCurrency: (amount: number) => string
  formatDate: (date: string | Date) => string
  t: (key: string) => string
  updatePreferences: (newPrefs: Partial<{ currency: string; language: string; dateFormat: string }>) => void
}

const PreferencesContext = createContext<PreferencesContextType | undefined>(undefined)

export function PreferencesProvider({ children }: { children: React.ReactNode }) {
  const { settings, updateSettings } = useSettings()
  const [preferences, setPreferences] = useState({
    currency: 'INR',
    language: 'en',
    dateFormat: 'dd-mm-yyyy'
  })

  useEffect(() => {
    if (settings) {
      setPreferences({
        currency: settings.currency,
        language: settings.language,
        dateFormat: settings.date_format
      })
    }
  }, [settings])

  const updatePreferences = async (newPrefs: Partial<{ currency: string; language: string; dateFormat: string }>) => {
    const updatedPrefs = { ...preferences, ...newPrefs }
    setPreferences(updatedPrefs)
    
    // Update settings in database
    if (updateSettings) {
      await updateSettings({
        currency: updatedPrefs.currency,
        language: updatedPrefs.language,
        date_format: updatedPrefs.dateFormat
      })
    }
  }

  const formatCurrency = (amount: number): string => {
    const currencyConfig = {
      INR: { symbol: 'â‚¹', locale: 'en-IN' },
      USD: { symbol: '$', locale: 'en-US' },
      EUR: { symbol: 'â‚¬', locale: 'de-DE' },
      GBP: { symbol: 'Â£', locale: 'en-GB' }
    }
    
    const config = currencyConfig[preferences.currency as keyof typeof currencyConfig] || currencyConfig.INR
    return `${config.symbol}${amount.toLocaleString(config.locale, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`
  }

  const formatDate = (date: string | Date): string => {
    const dateObj = typeof date === 'string' ? new Date(date) : date
    
    const localeMap = {
      en: 'en-US',
      hi: 'hi-IN',
      gu: 'gu-IN',
      mr: 'mr-IN'
    }
    
    const locale = localeMap[preferences.language as keyof typeof localeMap] || 'en-US'
    
    switch (preferences.dateFormat) {
      case 'mm-dd-yyyy':
        return dateObj.toLocaleDateString('en-US')
      case 'yyyy-mm-dd':
        return dateObj.toISOString().split('T')[0]
      case 'dd-mm-yyyy':
      default:
        return dateObj.toLocaleDateString(locale)
    }
  }

  const t = (key: string): string => {
    const langTranslations = translations[preferences.language as keyof typeof translations] || translations.en
    return langTranslations[key as keyof typeof langTranslations] || key
  }

  return (
    <PreferencesContext.Provider value={{
      ...preferences,
      formatCurrency,
      formatDate,
      t,
      updatePreferences
    }}>
      {children}
    </PreferencesContext.Provider>
  )
}

export function usePreferences() {
  const context = useContext(PreferencesContext)
  if (context === undefined) {
    throw new Error('usePreferences must be used within a PreferencesProvider')
  }
  return context
}